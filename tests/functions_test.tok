// Phase 3 comprehensive tests

// --- Range loop ---
~(i:0..5){p(i)}
pl("")

// --- While loop ---
x=10
~(x>0){p(x);x=x-1}
pl("")

// --- Standalone match (?= without subject) ---
score=85
grade=?={score>=90:"A";score>=80:"B";score>=70:"C";_:"F"}
pl(grade)

// --- Value match (expr?=) ---
x=2
r=x?={1:"one";2:"two";3:"three";_:"other"}
pl(r)

// --- Match with block body ---
cmd="hello"
cmd?={
  "hello":{pl("world")}
  "bye":{pl("goodbye")}
  _:{pl("unknown")}
}

// --- Nested loop + match (FizzBuzz first 15) ---
~(i:1..16){pl(?={i%15==0:"FizzBuzz";i%3==0:"Fizz";i%5==0:"Buzz";_:i})}

// --- Previous phase tests still work ---
f fib(n)=n<2?n:fib(n-1)+fib(n-2)
pl(fib(10))
pl("Hello, Tok!")
